<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>PsanÃ­ slov â€“ Levely</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f2f2f2;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    #hud {
        width: 100%;
        background: #333;
        color: white;
        padding: 10px;
        font-size: 18px;
        text-align: center;
        line-height: 1.5;
    }

    #menu {
        margin-top: 40px;
        text-align: center;
    }

    #game {
        margin-top: 30px;
        text-align: center;
        display: none;
        max-width: 900px;
    }

    #word {
        font-size: 28px;
        margin: 20px 0;
        font-weight: bold;
        white-space: pre-wrap;
        text-align: left;
    }

    input, textarea {
        font-size: 22px;
        padding: 10px;
        width: 90%;
        margin-top: 10px;
    }

    textarea {
        height: 200px;
        resize: none;
        font-family: Arial, sans-serif;
    }

    #result {
        font-size: 22px;
        margin-top: 15px;
        min-height: 40px;
    }

    #progress {
        margin-top: 10px;
        font-size: 18px;
        color: #333;
    }

    button {
        font-size: 22px;
        padding: 10px 20px;
        margin: 10px;
        cursor: pointer;
    }

    #endButtons {
        margin-top: 20px;
    }
</style>
</head>
<body>

<div id="hud">
    â± ÄŒas: <span id="time">0.0</span> s |
    âœ” SprÃ¡vnÄ›: <span id="correct">0</span> |
    âœ– Å patnÄ›: <span id="wrong">0</span><br>
    â­ SkÃ³re: <span id="score">0</span> |
    ğŸ”¥ SÃ©rie: <span id="streak">0</span> (max: <span id="bestStreak">0</span>) |
    ğŸ¯ PÅ™esnost: <span id="accuracy">0</span> %
</div>

<!-- MENU -->
<div id="menu">
    <h1>Vyber level</h1>
    <p>Level 1: jednotlivÃ¡ slova â€¢ Level 2: vÄ›ty â€¢ Level 3: celÃ© odstavce</p>
    <button onclick="startLevel(1)">Level 1 â€“ Slova</button>
    <button onclick="startLevel(2)">Level 2 â€“ VÄ›ty</button>
    <button onclick="startLevel(3)">Level 3 â€“ Odstavce</button>
</div>

<!-- HRA -->
<div id="game">
    <div id="word">---</div>

    <!-- input pro slova/vÄ›ty -->
    <input id="input" type="text" placeholder="piÅ¡ sem..." autocomplete="off">

    <!-- textarea pro odstavce -->
    <textarea id="inputBig" placeholder="opiÅ¡ celÃ½ odstavec..." style="display:none;"></textarea>

    <div id="progress"></div>
    <div id="result"></div>

    <div id="endButtons" style="display:none;">
        <button onclick="restartSameLevel()">HrÃ¡t znovu</button>
        <button onclick="backToMenu()">ZpÄ›t na vÃ½bÄ›r levelu</button>
    </div>
</div>

<script>
// ------------------------------------------------------
// Level 1 â€“ velkÃ½ slovnÃ­k
// ------------------------------------------------------
const words = [
    "auto","pes","kocka","strom","dum","skola","stul","okno",
    "slunce","hora","zamek","vlak","more","program","klavesnice",
    "pocitac","kreslo","koberec","kvetina","hlina","brambory",
    "rajce","hruska","stromek","letadlo","vozidlo","klavesy",
    "mys","obrazovka","internet","jazyk","ucitel","student",
    "kniha","pisen","zvire","pracovni","zahrada","stromisko"
];

// ------------------------------------------------------
// Level 2 â€“ vÄ›ty bez diakritiky
// ------------------------------------------------------
const sentences = [
    "Dnes je venku opravdu hezky",
    "Auto stoji pred nasi skolou",
    "Pes bezi po zelene louce",
    "Velky dum stoji u lesa",
    "Student pracuje na ukolu",
    "Program dnes funguje spravne",
    "Zitra pojedeme vlakem do mesta",
    "Nase zahrada potrebuje vodu",
    "Pocitac ma novou klavesnici",
    "Kocka spi na kresle"
].map(s => s.charAt(0).toUpperCase() + s.slice(1));

// ------------------------------------------------------
// Level 3 â€“ odstavce bez diakritiky
// ------------------------------------------------------
const paragraphs = [
`Dnes jsme se ve skole ucili o prirode. Ucitel nam vypravel o tom,
jak se zmenilo pocasi behem poslednich let. Mluvili jsme take o tom,
proc je dulezite chranit zvirata i rostliny.`,

`V sobotu jsme byli s rodinou na vylete. Videli jsme hodne stromu,
nektere byly opravdu obrovske. Cestou jsme narazili i na potok,
kde jsme si dali kratkou pauzu a odpocinuli si.`,

`Minuly tyden jsme zacali novy projekt. Ma to byt dlouha prace,
ktera bude obsahovat texty, obrazky i grafy. Pracujeme ve skupinach
a kazda skupina ma jiny ukol. Uz se tesim na vysledky.`
];

let level = 1;
let correct = 0;
let wrong = 0;
let time = 0;
let timer = null;

// skÃ³re a sÃ©rie
let score = 0;
let streak = 0;
let bestStreak = 0;

// kolik ÃºkolÅ¯ v jednom kole
let tasksDone = 0;
let tasksTotal = 0;

const timeEl     = document.getElementById("time");
const correctEl  = document.getElementById("correct");
const wrongEl    = document.getElementById("wrong");
const wordEl     = document.getElementById("word");

const inputEl    = document.getElementById("input");
const inputBig   = document.getElementById("inputBig");

const resultEl   = document.getElementById("result");
const progressEl = document.getElementById("progress");
const menu       = document.getElementById("menu");
const game       = document.getElementById("game");
const scoreEl    = document.getElementById("score");
const streakEl   = document.getElementById("streak");
const bestStreakEl = document.getElementById("bestStreak");
const accuracyEl = document.getElementById("accuracy");
const endButtons = document.getElementById("endButtons");

// ------------------------------------------------------
// ÄŒas
// ------------------------------------------------------
function startTimer() {
    if (timer) return;
    timer = setInterval(() => {
        time += 0.1;
        timeEl.textContent = time.toFixed(1);
    }, 100);
}

function stopTimer() {
    clearInterval(timer);
    timer = null;
}

// ------------------------------------------------------
// VÃ½bÄ›r textu podle levelu
// ------------------------------------------------------
function newWord() {
    if (level === 1) {
        wordEl.textContent = words[Math.floor(Math.random() * words.length)];
    } else if (level === 2) {
        wordEl.textContent = sentences[Math.floor(Math.random() * sentences.length)];
    } else {
        wordEl.textContent = paragraphs[Math.floor(Math.random() * paragraphs.length)];
    }

    // automatickÃ© focusovÃ¡nÃ­ inputu
    if (level === 3) {
        inputBig.focus();
    } else {
        inputEl.focus();
    }
}

// ------------------------------------------------------
// Statistika
// ------------------------------------------------------
function updateStats() {
    scoreEl.textContent = score;
    streakEl.textContent = streak;
    bestStreakEl.textContent = bestStreak;
    correctEl.textContent = correct;
    wrongEl.textContent = wrong;

    const total = correct + wrong;
    const acc = total > 0 ? Math.round((correct / total) * 100) : 0;
    accuracyEl.textContent = acc;

    progressEl.textContent = `Ãškol: ${tasksDone}/${tasksTotal}`;
}

// ------------------------------------------------------
// Konec kola
// ------------------------------------------------------
function endRound() {
    stopTimer();

    // shrnutÃ­
    const total = correct + wrong;
    const acc = total > 0 ? Math.round((correct / total) * 100) : 0;
    resultEl.innerHTML =
        `<strong>Konec kola!</strong><br>` +
        `ÄŒas: ${time.toFixed(1)} s<br>` +
        `SprÃ¡vnÄ›: ${correct}, Å¡patnÄ›: ${wrong}<br>` +
        `PÅ™esnost: ${acc} %<br>` +
        `SkÃ³re: ${score}, nejlepÅ¡Ã­ sÃ©rie: ${bestStreak}`;

    endButtons.style.display = "block";
}

// ------------------------------------------------------
// Kontrola
// ------------------------------------------------------
function checkWord() {
    const target = wordEl.textContent.trim();
    const typed  = (level <= 2 ? inputEl.value.trim() : inputBig.value.trim());

    if (!typed) {
        return; // prÃ¡zdnÃ½ vstup nepoÄÃ­tÃ¡me
    }

    tasksDone++;

    if (typed === target) {
        correct++;
        streak++;
        if (streak > bestStreak) bestStreak = streak;
        score += 10 + Math.max(0, 5 - Math.floor(time)); // malÃ½ bonus za rychlost na zaÄÃ¡tku kola
        resultEl.textContent = "SprÃ¡vnÄ›!";
        resultEl.style.color = "green";
    } else {
        wrong++;
        streak = 0;
        score = Math.max(0, score - 5);
        resultEl.innerHTML =
            `Å patnÄ›.<br><span style="color:#555;">SprÃ¡vnÄ›: â€${target}â€œ<br>Ty: â€${typed}â€œ</span>`;
        resultEl.style.color = "red";
    }

    inputEl.value = "";
    inputBig.value = "";

    updateStats();

    // konec kola?
    if (tasksDone >= tasksTotal) {
        endRound();
    } else {
        newWord();
    }
}

// ------------------------------------------------------
// Start hry
// ------------------------------------------------------
function startLevel(lvl) {
    level = lvl;
    menu.style.display = "none";
    game.style.display = "block";
    endButtons.style.display = "none";

    // Reset
    correct = 0;
    wrong = 0;
    time = 0;
    score = 0;
    streak = 0;
    bestStreak = 0;
    tasksDone = 0;

    timeEl.textContent = "0.0";
    resultEl.textContent = "";
    resultEl.style.color = "black";

    // PoÄet ÃºkolÅ¯ podle levelu
    if (level === 1) {
        tasksTotal = 20;
    } else if (level === 2) {
        tasksTotal = 12;
    } else {
        tasksTotal = 6;
    }

    // PÅ™epnout inputy
    if (level === 3) {
        inputEl.style.display = "none";
        inputBig.style.display = "block";
    } else {
        inputEl.style.display = "block";
        inputBig.style.display = "none";
    }

    updateStats();
    newWord();
    stopTimer();
    startTimer();
}

// ------------------------------------------------------
// Restart stejnÃ©ho levelu
// ------------------------------------------------------
function restartSameLevel() {
    startLevel(level);
}

// ZpÄ›t na menu
function backToMenu() {
    stopTimer();
    menu.style.display = "block";
    game.style.display = "none";
}

// ------------------------------------------------------
// Enter u inputu
// ------------------------------------------------------
inputEl.addEventListener("keydown", e => {
    if (e.key === "Enter") checkWord();
});

// Enter u textarea â€“ Ctrl+Enter pro potvrzenÃ­
inputBig.addEventListener("keydown", e => {
    if (e.key === "Enter" && e.ctrlKey) {
        e.preventDefault();
        checkWord();
    }
});
</script>

</body>
</html>
