<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>BalÃ­Äek pÅ™es mÄ›sto</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f2f2f2;
        margin: 0;
        padding: 20px;
    }
    h1 { text-align: center; }

    .map {
        width: 80%;
        max-width: 700px;
        margin: 30px auto;
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        grid-template-rows: repeat(3, 120px);
        gap: 20px;
        position: relative; /* kvÅ¯li balÃ­Äku */
        background: #e0f2f1;
        border-radius: 10px;
        padding: 10px;
        box-sizing: border-box;
    }

    .node {
        background: #fff;
        border: 2px solid #bdbdbd;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        text-align: center;
        padding: 10px;
        transition: 0.2s;
        font-size: 18px;
        font-weight: bold;
        z-index: 1; /* nad mapovÃ½m podkladem */
    }

    .node:hover {
        background: #e3f2fd;
    }

    .node.selected {
        background: #fff8e1;
        border-color: #ffb300;
    }

    .node.correct {
        background: #e8f5e9;
        border-color: #43a047;
    }

    .node.wrong {
        background: #ffebee;
        border-color: #e53935;
    }

    #info {
        text-align: center;
        font-size: 18px;
        margin-top: 20px;
        min-height: 32px;
    }

    #path {
        text-align: center;
        font-size: 14px;
        margin-top: 5px;
        color: #616161;
    }

    #reset {
        display: block;
        margin: 20px auto;
        padding: 8px 16px;
        font-size: 16px;
        border: none;
        background: #9e9e9e;
        color: white;
        border-radius: 6px;
        cursor: pointer;
    }

    #reset:hover {
        background: #757575;
    }

    /* BalÃ­Äek â€“ animovanÃ½ prvek */
    #package {
        position: absolute;
        width: 32px;
        height: 32px;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        pointer-events: none;
        transition: left 0.6s linear, top 0.6s linear;
        z-index: 2; /* nad uzly */
    }
</style>
</head>

<body>
<h1>BalÃ­Äek pÅ™es mÄ›sto</h1>
<p style="text-align:center;">
    Klikni na jednotlivÃ© zastÃ¡vky, aby balÃ­Äek doÅ¡el z domu aÅ¾ na server.
</p>

<div class="map" id="map">
    <!-- animovanÃ½ balÃ­Äek -->
    <div id="package">ğŸ“¦</div>

    <!-- uzly -->
    <div class="node" data-id="pc"      style="grid-column:1; grid-row:1;">ğŸ  DÅ¯m</div>
    <div class="node" data-id="switch"  style="grid-column:2; grid-row:1;">ğŸ“® PoboÄka</div>
    <div class="node" data-id="router"  style="grid-column:3; grid-row:1;">ğŸ¢ HlavnÃ­ poÅ¡ta</div>
    <div class="node" data-id="internet"style="grid-column:4; grid-row:2;">âœˆï¸ LetiÅ¡tÄ›</div>
    <div class="node" data-id="server"  style="grid-column:5; grid-row:3;">ğŸ’» Server</div>
</div>

<div id="info"></div>
<div id="path">(zatÃ­m Å¾Ã¡dnÃ¡ cesta)</div>

<button id="reset">Reset</button>

<script>
const correctPath = ["pc","switch","router","internet","server"];
let selected = [];
let finished = false;  // aby po ÃºspÄ›chu nelezli do animace klikÃ¡nÃ­m

const info = document.getElementById("info");
const path = document.getElementById("path");
const mapEl = document.getElementById("map");
const packageEl = document.getElementById("package");
const nodes = document.querySelectorAll(".node");

function updatePath() {
    if (selected.length === 0) {
        path.textContent = "(zatÃ­m Å¾Ã¡dnÃ¡ cesta)";
        return;
    }
    const names = {
        pc:"DÅ¯m",
        switch:"PoboÄka",
        router:"HlavnÃ­ poÅ¡ta",
        internet:"LetiÅ¡tÄ›",
        server:"Server"
    };
    path.textContent = "Cesta: " + selected.map(id => names[id]).join(" â†’ ");
}

// spoÄÃ­tÃ¡ stÅ™ed uzlu v souÅ™adnicÃ­ch relativnÄ› k .map
function getNodeCenter(node) {
    const nodeRect = node.getBoundingClientRect();
    const mapRect = mapEl.getBoundingClientRect();
    return {
        x: nodeRect.left - mapRect.left + nodeRect.width / 2,
        y: nodeRect.top - mapRect.top + nodeRect.height / 2
    };
}

// animace balÃ­Äku po sprÃ¡vnÃ© cestÄ›
function animatePackage() {
    const nodesOnPath = correctPath.map(id =>
        document.querySelector('.node[data-id="'+id+'"]')
    );
    const coords = nodesOnPath.map(getNodeCenter);

    if (coords.length === 0) return;

    // pÅ™ipravÃ­me balÃ­Äek
    const size = 32;
    packageEl.style.display = "flex";
    packageEl.style.left = (coords[0].x - size/2) + "px";
    packageEl.style.top  = (coords[0].y - size/2) + "px";

    let i = 1;
    function step() {
        if (i >= coords.length) return;
        packageEl.style.left = (coords[i].x - size/2) + "px";
        packageEl.style.top  = (coords[i].y - size/2) + "px";
        i++;
        if (i < coords.length) {
            setTimeout(step, 700); // Äekej, neÅ¾ dobÄ›hne transition
        }
    }

    // malÃ¡ prodleva, aby bylo vidÄ›t â€startâ€œ
    setTimeout(step, 300);
}

nodes.forEach(node => {
    node.addEventListener("click", () => {
        if (finished) return;  // po dokonÄenÃ­ uÅ¾ nekazit animaci

        const id = node.dataset.id;

        if (selected.includes(id)) return;  // uÅ¾ je ve zvolenÃ© cestÄ›
        selected.push(id);

        node.classList.add("selected");
        updatePath();

        // prÅ¯bÄ›Å¾nÃ¡ kontrola sprÃ¡vnosti prefixu
        for (let i = 0; i < selected.length; i++) {
            if (selected[i] !== correctPath[i]) {
                info.textContent = "BalÃ­Äek zabloudil! Tady tahle zastÃ¡vka je Å¡patnÄ›.";
                info.style.color = "#e53935";

                selected.forEach(s => {
                    document.querySelector('[data-id="'+s+'"]')
                        .classList.add("wrong");
                });
                finished = true;  // hra pro tuto rundu skonÄila
                return;
            }
        }

        // jestli mÃ¡me celou sprÃ¡vnou cestu
        if (selected.length === correctPath.length) {
            info.textContent = "SkvÄ›lÃ©! BalÃ­Äek dorazil na server â€“ podÃ­vej, jak jede.";
            info.style.color = "#43a047";

            correctPath.forEach(s => {
                document.querySelector('[data-id="'+s+'"]')
                    .classList.add("correct");
            });

            finished = true;
            animatePackage();
        }
    });
});

document.getElementById("reset").addEventListener("click", () => {
    selected = [];
    finished = false;
    info.textContent = "";
    updatePath();

    nodes.forEach(n => {
        n.classList.remove("selected","correct","wrong");
    });

    packageEl.style.display = "none";
});
</script>

</body>
</html>
