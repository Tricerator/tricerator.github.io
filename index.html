<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>JednoduchÃ¡ hra â€“ ÄŒervenÃ© Ätverce</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: #f0f0f0;
    }

    #hud {
        padding: 10px;
        background: #333;
        color: white;
        font-size: 20px;
    }

    #gameArea {
        position: relative;
        width: 100vw;
        height: calc(100vh - 50px);
        background: #eee;
        overflow: hidden;
        cursor: crosshair;
    }

    .square {
        position: absolute;
        background: red;
        border-radius: 4px;
    }
</style>
</head>
<body>

<div id="hud">
    â± ÄŒas: <span id="time">0.0</span> s  
    | ğŸ¯ SkÃ³re: <span id="hit">0</span>/<span id="total">0</span>
    | ğŸ”¥ ÃšroveÅˆ: <span id="level">1</span>
    | P = pauza, klik = start
</div>

<div id="gameArea"></div>

<!-- JednoduchÃ© zvuky (nahraÄ svÃ© vlastnÃ­ soubory) -->
<audio id="hitSound" src="hit.wav" preload="auto"></audio>
<audio id="missSound" src="miss.wav" preload="auto"></audio>

<script>
let gameRunning   = true;
let time          = 0;
let hit           = 0;
let total         = 0;
let level         = 1;

let timerInterval = null;
let spawnInterval = null;

// Parametry obtÃ­Å¾nosti
let spawnDelay      = 800;   // ms â€“ jak Äasto se spawnuje
const minSpawnDelay = 250;

let lifetime        = 1200;  // ms â€“ jak dlouho Ätverec Å¾ije
const minLifetime   = 500;

let squareSize      = 40;    // px â€“ velikost Ätverce
const minSquareSize = 18;

const timeEl   = document.getElementById("time");
const hitEl    = document.getElementById("hit");
const totalEl  = document.getElementById("total");
const levelEl  = document.getElementById("level");
const gameArea = document.getElementById("gameArea");

const hitSound  = document.getElementById("hitSound");
const missSound = document.getElementById("missSound");

// ---- ÄŒASOMÃRA ----
function startTimer() {
    if (timerInterval) return;
    timerInterval = setInterval(() => {
        time += 0.1;
        timeEl.textContent = time.toFixed(1);
    }, 100);
}

function stopTimer() {
    clearInterval(timerInterval);
    timerInterval = null;
}

// ---- ZVUKY ----
function playSound(sound) {
    if (!sound) return;
    try {
        sound.currentTime = 0;
        sound.play();
    } catch (e) {
        // KdyÅ¾ prohlÃ­Å¾eÄ blokuje zvuk, prostÄ› to ignorujeme
    }
}

// ---- OBTÃÅ½NOST ----
function increaseDifficulty() {
    // KaÅ¾dÃ½ch 5 zÃ¡sahÅ¯ zvedneme ÃºroveÅˆ
    if (hit % 5 === 0) {
        level++;
        levelEl.textContent = level;

        // RychlejÅ¡Ã­ spawn
        spawnDelay = Math.max(minSpawnDelay, spawnDelay - 80);

        // KratÅ¡Ã­ Å¾ivot
        lifetime = Math.max(minLifetime, lifetime - 80);

        // MenÅ¡Ã­ Ätverce
        squareSize = Math.max(minSquareSize, squareSize - 2);

        // Znovu spustit spawn s novÃ½m intervalem
        restartSpawning();
    }
}

// ---- GENEROVÃNÃ ÄŒTVEREÄŒKÅ® ----
function spawnSquare() {
    if (!gameRunning) return;

    const square = document.createElement("div");
    square.className = "square";
    square.style.width  = square.style.height = squareSize + "px";

    const areaW = gameArea.clientWidth  - squareSize;
    const areaH = gameArea.clientHeight - squareSize;

    square.style.left = Math.random() * areaW + "px";
    square.style.top  = Math.random() * areaH + "px";

    total++;
    totalEl.textContent = total;

    // ---- ZÃSÃH PÅ˜EJETÃM MYÅ Ã (mouseenter) ----
    const onHit = () => {
        hit++;
        hitEl.textContent = hit;
        playSound(hitSound);
        square.remove();
        increaseDifficulty();
    };

    // once:true = zavolÃ¡ se jen jednou, Å¾Ã¡dnÃ© dvojÃ­ poÄÃ­tÃ¡nÃ­
    square.addEventListener("mouseenter", onHit, { once: true });

    gameArea.appendChild(square);

    // ÄŒtverec zmizÃ­ po 'lifetime' ms, pokud ho hrÃ¡Ä netrefÃ­
    setTimeout(() => {
        if (square.parentElement) {
            square.remove();
            playSound(missSound);
        }
    }, lifetime);
}

function startSpawning() {
    if (spawnInterval) return;
    spawnInterval = setInterval(spawnSquare, spawnDelay);
}

function restartSpawning() {
    stopSpawning();
    startSpawning();
}

function stopSpawning() {
    clearInterval(spawnInterval);
    spawnInterval = null;
}

// ---- PAUZA (klÃ¡vesa P) ----
document.addEventListener("keydown", e => {
    if (e.key.toLowerCase() === "p") {
        if (gameRunning) {
            gameRunning = false;
            stopTimer();
            stopSpawning();
        } else {
            gameRunning = true;
            startTimer();
            startSpawning();
        }
    }
});

// ---- Klik = start ze pauzy ----
gameArea.addEventListener("mousedown", () => {
    if (!gameRunning) {
        gameRunning = true;
        startTimer();
        startSpawning();
    }
});

// ---- SpuÅ¡tÄ›nÃ­ hry ihned po naÄtenÃ­ ----
startTimer();
startSpawning();
</script>

</body>
</html>
